---
Index: "[[π· Command]]"
tags:
  - Linux
  - Linux/cmd
  - Linux/Network
  - Linux/namespace
---
>[!info] Link
>- [[02-12-0. (μ‹¤μµ) namespace - Network λ„¤μ„μ¤νμ΄μ¤]]
>- [[ip]]

## `ip` 
- `ip`λ” `net-tools`μ `ifconfig`, `route` λ“±μ„ λ€μ²΄ν•λ” λ„¤νΈμ›ν¬ μ„¤μ • λ„κµ¬μ΄λ‹¤.

### 1. ν•μ‹

```
ip [OBJECT] [COMMAND] [OPTIONS]
```

- μ£Όμ” OBJECT λ° μμ‹

| OBJECT          | μ„¤λ…            | μμ‹                                            |
| --------------- | ------------- | --------------------------------------------- |
| `link`          | λ„¤νΈμ›ν¬ μΈν„°νμ΄μ¤ μ„¤μ • | `ip link show`, `ip link set eth0 up`         |
| `addr`          | IP μ£Όμ† μ„¤μ •/μ΅°ν   | `ip addr add 192.168.1.10/24 dev eth0`        |
| `route`         | λΌμ°ν… ν…μ΄λΈ” μ„¤μ •    | `ip route add default via 192.168.1.1`        |
| `neigh`         | ARP μ„¤μ •        | `ip neigh show`, `ip neigh add`               |
| `netns`         | λ„¤μ„μ¤νμ΄μ¤ κ΄€λ¦¬     | `ip netns add`, `ip netns exec`               |
| `link` + `veth` | κ°€μƒ μΈν„°νμ΄μ¤ μƒμ„±   | `ip link add veth0 type veth peer name veth1` |


---

## λ„¤νΈμ›ν¬ λ„¤μ„μ¤νμ΄μ¤ (`ip netns`) 
- λ„¤μ„μ¤νμ΄μ¤λ” κ²©λ¦¬λ λ„¤νΈμ›ν¬ ν™κ²½μ„ μ κ³µν•λ‹¤.
- ν•λ‚μ λ¦¬λ…μ¤ μ‹μ¤ν…μ—μ„ μ—¬λ¬ κ°μ λ…λ¦½λ λ„¤νΈμ›ν¬ μ¤νƒμ„ μ΄μ©ν•  μ μλ‹¤.

### 1. μ£Όμ” λ…λ Ήμ–΄ μ •λ¦¬

| λ…λ Ήμ–΄                              | μ„¤λ…                               |
| -------------------------------- | -------------------------------- |
| `ip netns list`                  | μƒμ„±λ λ„¤μ„μ¤νμ΄μ¤ λ©λ΅ λ³΄κΈ°                 |
| `ip netns add <NAME>`            | λ„¤μ„μ¤νμ΄μ¤ μƒμ„±                        |
| `ip netns delete <NAME>`         | λ„¤μ„μ¤νμ΄μ¤ μ‚­μ                         |
| `ip netns exec <NAME> <COMMAND>` | ν•΄λ‹Ή λ„¤μ„μ¤νμ΄μ¤μ—μ„ λ…λ Ή μ‹¤ν–‰                |


### 2. μμ 

### 1. λ„¤μ„μ¤νμ΄μ¤ μƒμ„±

```bash
ip netns add ns0
ip netns add ns1
```

### 2. κ°€μƒ μΈν„°νμ΄μ¤ (veth pair) μƒμ„± λ° μ—°κ²°

```bash
ip link add veth-ns0 type veth peer name veth-ns1
ip link set veth-ns1 netns ns1
ip link set veth-ns2 netns ns2
```

### 3. κ° λ„¤μ„μ¤νμ΄μ¤μ—μ„ μΈν„°νμ΄μ¤ ν™μ„±ν™” λ° IP ν• λ‹Ή

```bash
ip netns exec ns0 ip addr add 10.0.0.1/24 dev veth-ns0
ip netns exec ns1 ip addr add 10.0.0.2/24 dev veth-ns1

ip netns exec ns0 ip link set veth-ns0 up
ip netns exec ns1 ip link set veth-ns1 up

ip netns exec ns0 ip link set lo up
ip netns exec ns1 ip link set lo up
```

### 4. ν†µμ‹  ν…μ¤νΈ

```bash
# ns0 -> ns1μ veth-ns1λ΅ ν†µμ‹ 
ip netns exec ns1 ping 10.0.0.2
```
